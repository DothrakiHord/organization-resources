steps:
- name: 'gcr.io/${PROJECT_ID}/terraform'
  args: ['init',
    '-plugin-dir=/root/.terraform.d/plugins',
    '-backend-config=project=${PROJECT_ID}',
    '-backend-config=bucket=gcpidentityexample-1-cf-1-terraform']
  env:
  - "TF_VAR_project-name=${PROJECT_ID}"
  secretEnv:
  - GCLOUD_SERVICE_KEY

- name: 'gcr.io/${PROJECT_ID}/terraform'
  args: ['plan']
  env:
  - "TF_VAR_project-name=${PROJECT_ID}"
  secretEnv:
  - GCLOUD_SERVICE_KEY

- name: 'gcr.io/${PROJECT_ID}/terraform'
  args: ['apply', '-auto-approve']
  env:
  - "TF_VAR_project-name=${PROJECT_ID}"
  secretEnv:
  - GCLOUD_SERVICE_KEY

secrets:
- kmsKeyName: projects/gcpidentityexample-1-cf-1/locations/global/keyRings/cloud-build-key/cryptoKeys/cloud-build-key-1
  secretEnv:
    GCLOUD_SERVICE_KEY: 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
